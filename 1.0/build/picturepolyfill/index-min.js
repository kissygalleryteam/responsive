/*! responsive - v1.0 - 2013-05-14 2:38:06 PM
* Copyright (c) 2013 妙净、墨峰等; Licensed  */
KISSY.add("gallery/responsive/1.0/respondtools/index",function(){"use strict";function e(e){if(window.matchMedia&window.matchMedia("only all").matches)return window.matchMedia(e).matches;var t,i,n=document.documentElement.clientWidth;return t=e.replace(/.*min-width[\:\s]+(\d+)px.*/gi,"$1"),i=e.replace(/.*max-width[\:\s]+(\d+)px.*/gi,"$1"),t=/width/.test(t)?0:t,i=/width/.test(i)?0:i,i?n>=t&&i>=n:n>=t}window.matchMedia=window.matchMedia||function(e){var t,i=e.documentElement,n=i.firstElementChild||i.firstChild,a=e.createElement("body"),d=e.createElement("div");return d.id="mq-test-1",d.style.cssText="position:absolute;top:-100em",a.style.background="none",a.appendChild(d),function(e){return d.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(a,n),t=42===d.offsetWidth,i.removeChild(a),{matches:t,media:e}}}(document);var t={match:window.matchMedia,wave:e};return t}),KISSY.add("gallery/responsive/1.0/picturepolyfill/index",function(e,t,i){"use strict";function n(){var e=this;n.superclass.constructor.call(e),e.init()}return e.extend(n,t,{init:function(){var t,i=this;i._responsiveImg(),window.onresize=function(){t&&t.cancel(),t=e.later(i._responsiveImg,200,!1,i)}},_responsiveImg:function(){var e=window,t=e.document.getElementsByTagName("div");window.devicePixelRatio&&window.devicePixelRatio;for(var n=0,a=t.length;a>n;n++)if(null!==t[n].getAttribute("data-picture")){for(var d=t[n].getElementsByTagName("div"),r=[],s=0,o=d.length;o>s;s++){var l=d[s].getAttribute("data-media");(!l||i.wave(l))&&r.push(d[s])}var c=t[n].getElementsByTagName("img")[0];if(r.length){c||(c=e.document.createElement("img"),c.alt=t[n].getAttribute("data-alt"),t[n].appendChild(c));for(var m,u=r.pop().getAttribute("data-src"),h=u.split(","),w=0,p=h.length;p>w;w++){var v=h[w].replace(/^\s*/,"").replace(/\s*$/,"").split(" "),f=parseFloat(v[1],10);window.devicePixelRatio?f==window.devicePixelRatio&&(m=v[0]):(!v[1]||v[1]&&1==f)&&(m=v[0])}c.src=m}else c&&t[n].removeChild(c)}}}),n},{requires:["base","../respondtools/index"]});