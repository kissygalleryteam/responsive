/*! responsive - v1.0 - 2013-05-20 5:17:09 PM
* Copyright (c) 2013 妙净、墨峰等; Licensed  */
KISSY.add("gallery/responsive/1.0/respondtools/index",function(S){"use strict";var matchMedia=window.matchMedia=window.matchMedia||function(e){var t,i=e.documentElement,n=i.firstElementChild||i.firstChild,r=e.createElement("body"),a=e.createElement("div");return a.id="mq-test-1",a.style.cssText="position:absolute;top:-100em",r.style.background="none",r.appendChild(a),function(e){return a.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(r,n),t=42===a.offsetWidth,i.removeChild(r),{matches:t,media:e}}}(document),isSupportMediaquery=window.matchMedia&&window.matchMedia("only all").matches,wave=function(mediaquery){if(isSupportMediaquery)return window.matchMedia(mediaquery).matches;var min,max,docEl=document.documentElement,widthOrHeight=/width/.test(mediaquery)?"width":"height",viewportWidthOrHeight="width"==widthOrHeight?docEl.clientWidth:docEl.clientHeight;return min=mediaquery.replace(eval("/.*min-"+widthOrHeight+"[\\:\\s]+(\\d+)px.*/ig"),"$1"),max=mediaquery.replace(eval("/.*max-"+widthOrHeight+"[\\:\\s]+(\\d+)px.*/ig"),"$1"),min=/^\d/.test(min)?min:0,max=/^\d/.test(max)?max:0,max?viewportWidthOrHeight>=min&&max>=viewportWidthOrHeight:viewportWidthOrHeight>=min},RespondTools={isSupportMediaquery:isSupportMediaquery,matchMedia:S.bind(matchMedia,window),wave:wave};return RespondTools}),KISSY.add("gallery/responsive/1.0/picturepolyfill/index",function(e,t,i){"use strict";function n(){var e=this;n.superclass.constructor.call(e),e.init()}return e.extend(n,t,{init:function(){var t,i=this;i._responsiveImg(),window.onresize=function(){t&&t.cancel(),t=e.later(i._responsiveImg,200,!1,i)}},_responsiveImg:function(){for(var e=window,t=e.document.getElementsByTagName("div"),n=0,r=t.length;r>n;n++)if(null!==t[n].getAttribute("data-picture")){for(var a=t[n].getElementsByTagName("div"),d=[],s=0,o=a.length;o>s;s++){var l=a[s].getAttribute("data-media");(!l||i.wave(l))&&d.push(a[s])}var m=t[n].getElementsByTagName("img")[0];if(d.length){m||(m=e.document.createElement("img"),m.alt=t[n].getAttribute("data-alt"),t[n].appendChild(m));for(var c,h=d.pop().getAttribute("data-src"),u=h.split(","),p=0,w=u.length;w>p;p++){var v=u[p].replace(/^\s*/,"").replace(/\s*$/,"").split(" "),g=parseFloat(v[1],10);g=g||1,window.devicePixelRatio?g==window.devicePixelRatio&&(c=v[0]):(!v[1]||v[1]&&1==g)&&(c=v[0])}m.src=c}else m&&t[n].removeChild(m)}}}),n},{requires:["base","../respondtools/index"]});